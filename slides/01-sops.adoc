[.columns]
== SOPS

[.column]
--
image::logo_sops.png[]

link:https://github.com/getsops/sops[Documentation & Installation]
--

[.column]
--
Installation possible avec link:TODO_SLIDES_ASDF[asdf]
--

[.notes]
****
SOPS permet de chiffrer des données dans un fichier à l'aide de plusieurs méthodes de chiffrements (SOPS, KMS...).
Alternative viable en cas de non-dispo de vault et/ou autre.
Facilité d'utilisation pour GitOps

CNCF
****

=== Structure d'un fichier

==== YAML

// NOTE: Format utilisé par les exemples de cette présentation

[%linenums,yaml]
----
include::../code/01-sops-file.yaml[]
----

[.notes]
****
- Clés en clair, contenu chiffré
- metadata sops incluse dans le fichier, ainsi que les destinataires.
- un hmac par destinataire + un mac globale de modificaiton et indique version utilisée par sops.
- Autre formats possible, mais utilisé dans conf pour simplicité : INI JSON ...
****

[.columns]
== Méthodes de chiffrement

[.column]
--
Chiffrement avec link:https://github.com/FiloSottile/age[age] pour cette présentation
--

[.column]
--
Exemple de clé age

[source,bash]
----
$ age-keygen
# created: 2024-03-08T15:17:28+01:00
# public key: age14trf5fvhkppd8suunru9mg7dkk9r6ndzwc7tnw45yufs2j9h3u9qqwttxu
AGE-SECRET-KEY-1RM9QASYLNVDQ48HDY5ST7RUXX4LFWPR6PTUHUFG7N5RYUG0PNLLSG6D70R
----
--

[.notes]
****
- Usage simple
- Non centralisé
- Plusieurs méthodes de chiffrement : AWS KMS, Azure, GCP, PGP

****

